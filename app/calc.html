<!--#set var="title" value="OptimizedHTML 5" -->
<!--#include virtual="./parts/header.html" -->
<div class="page page__bg">
  <!--#include virtual="./parts/head.html" -->
  <div class="calc__form">
    <div class="compass-field-wrapper">
      <label for="">Фио</label>
      <input type="text" class="compass-field">
    </div>

    <div class="compass-field-wrapper">
      <label for="">Пол</label>
      <select name="" id="" class="compass-field">
        <option value="m">Мужской</option>
        <option value="f">Женский</option>
      </select>
    </div>

    <div class="compass-field-wrapper">
      <label for="">Дата рождения</label>
      <select name="" id="" class="compass-field">
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">4</option>
        <option value="5">6</option>
        <option value="7">8</option>
        <option value="9">9</option>
        <option value="10">10</option>
        <option value="11">11</option>
      </select>

      <select name="" id="" class="compass-field">
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">4</option>
        <option value="5">6</option>
        <option value="7">8</option>
        <option value="9">9</option>
        <option value="10">10</option>
        <option value="11">11</option>
      </select>

      <select name="" id="" class="compass-field">
        <option value="1990">1990</option>
        <option value="1991">1991</option>
        <option value="1992">1992</option>
        <option value="1993">1993</option>
        <option value="1994">1994</option>
      </select>



    </div>

    <div class="compass-field-wrapper">
      <label for="">Время рождения</label>

      <select name="" id="" class="compass-field">
        <option value="00">00</option>
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
      </select>
      <select name="" id="" class="compass-field">
        <option value="00">00</option>
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
      </select>
    </div>

    <div class="field-wrapper">
      <label for="">Местное солнечное время</label>
      <input type="checkbox">
    </div>

    <div class="city-form">
      <input type="text" id="city-search" placeholder="Поиск города..." autocomplete="off">
      <div id="city-dropdown" class="dropdown"></div>

      <select id="timezone-select">
      </select>

      <div class="cd-wrap">
        <input type="text" id="city-lat" placeholder="Широта" readonly>
        <input type="text" id="city-lon" placeholder="Долгота" readonly>
      </div>
    </div>


    <a href="" class="calc-btn">Рассчитать</a>
  </div>

  <div class="t1">
    <div class="t1__col-group">
      <div class="t1__col">
        <div class="t1__arrows">
          <a href="">◄</a>
          <a href="">►</a>
        </div>
        <div class="t1__head">Час</div>

        <div class="t1__row">
          <div class="t1__cell color-beige">Пра­виль­ная власть</div>
        </div>

        <div class="t1__row">
          <div class="t1__cell color-beige">Ян Огонь</div>
        </div>

        <div class="t1__row">
          <div class="t1__cell t1__cell--large color-beige">
            <span class="n-top-l">1</span>
            <span class="n-top-r">2</span>
            <span class="n-bot-l">3</span>
            <span class="n-bot-r">4</span>
            丙
          </div>
        </div>

        <div class="t1__row">
          <div class="t1__cell color-beige">
            <p>Ян Огонь</p>
            <p>Ян Огонь</p>
            <p>Ян Огонь</p>
          </div>
        </div>
      </div>
      <div class="t1__col t1__col--blue">
        <div class="t1__arrows">
          <a href="">◄</a>
          <a href="">►</a>
        </div>
        <div class="t1__head">Час</div>

        <div class="t1__row">
          <div class="t1__cell color-beige">Пра­виль­ная власть</div>
        </div>

        <div class="t1__row">
          <div class="t1__cell color-beige">Ян Огонь</div>
        </div>

        <div class="t1__row">
          <div class="t1__cell t1__cell--large color-red">
            <span class="n-top-l color-beige">1</span>
            <span class="n-top-r color-beige">2</span>
            <span class="n-bot-l color-beige">3</span>
            <span class="n-bot-r color-beige">4</span>
            丙
          </div>
        </div>

        <div class="t1__row">
          <div class="t1__cell color-beige">
            <p><span>己</span> <span>己</span> <span>己</span></p>
            <p><span>ГБ</span> <span>ГБ</span> <span>ГБ</span></p>
          </div>
        </div>
      </div>
      <div class="t1__col">
        <div class="t1__arrows">
          <a href="">◄</a>
          <a href="">►</a>
        </div>
        <div class="t1__head">Час</div>

        <div class="t1__row">
          <div class="t1__cell color-beige">Пра­виль­ная власть</div>
        </div>

        <div class="t1__row">
          <div class="t1__cell color-beige">Ян Огонь</div>
        </div>

        <div class="t1__row">
          <div class="t1__cell t1__cell--large color-red bg-earth-op">
            <span class="n-top-l color-beige">1</span>
            <span class="n-top-r color-beige">2</span>
            <span class="n-bot-l color-beige">3</span>
            <span class="n-bot-r color-beige">4</span>
            丙
          </div>
        </div>

        <div class="t1__row">
          <div class="t1__cell color-beige">
            <p><span>己</span> <span>己</span> <span>己</span></p>
            <p><span>ГБ</span> <span>ГБ</span> <span>ГБ</span></p>
          </div>
        </div>
      </div>
      <div class="t1__col">
        <div class="t1__arrows">
          <a href="">◄</a>
          <a href="">►</a>
        </div>
        <div class="t1__head">Час</div>

        <div class="t1__row">
          <div class="t1__cell color-beige">Пра­виль­ная власть</div>
        </div>

        <div class="t1__row">
          <div class="t1__cell color-beige">Ян Огонь</div>
        </div>

        <div class="t1__row">
          <div class="t1__cell t1__cell--large color-red">
            <span class="n-top-l color-beige">1</span>
            <span class="n-top-r color-beige">2</span>
            <span class="n-bot-l color-beige">3</span>
            <span class="n-bot-r color-beige">4</span>
            丙
          </div>
        </div>

        <div class="t1__row">
          <div class="t1__cell color-beige">
            <p><span>己</span> <span>己</span> <span>己</span></p>
            <p><span>ГБ</span> <span>ГБ</span> <span>ГБ</span></p>
          </div>
        </div>
      </div>
    </div>
    <div class="t1__col-group">
      <div class="t1__col">
        <div class="t1__arrows">
          <a href="">◄</a>
          <a href="">►</a>
        </div>
        <div class="t1__head">Час</div>

        <div class="t1__row">
          <div class="t1__cell color-beige">Пра­виль­ная власть</div>
        </div>

        <div class="t1__row">
          <div class="t1__cell color-beige">Ян Огонь</div>
        </div>

        <div class="t1__row">
          <div class="t1__cell t1__cell--large color-red">
            <span class="n-top-l color-beige">1</span>
            <span class="n-top-r color-beige">2</span>
            <span class="n-bot-l color-beige">3</span>
            <span class="n-bot-r color-beige">4</span>
            丙
          </div>
        </div>

        <div class="t1__row">
          <div class="t1__cell color-beige">
            <p><span>己</span> <span>己</span> <span>己</span></p>
            <p><span>ГБ</span> <span>ГБ</span> <span>ГБ</span></p>
          </div>
        </div>
      </div>
      <div class="t1__col">
        <div class="t1__arrows">
          <a href="">◄</a>
          <a href="">►</a>
        </div>
        <div class="t1__head">Час</div>

        <div class="t1__row">
          <div class="t1__cell color-beige">Пра­виль­ная власть</div>
        </div>

        <div class="t1__row">
          <div class="t1__cell color-beige">Ян Огонь</div>
        </div>

        <div class="t1__row">
          <div class="t1__cell t1__cell--large color-red">
            <span class="n-top-l color-beige">1</span>
            <span class="n-top-r color-beige">2</span>
            <span class="n-bot-l color-beige">3</span>
            <span class="n-bot-r color-beige">4</span>
            丙
          </div>
        </div>

        <div class="t1__row">
          <div class="t1__cell color-beige">
            <p><span>己</span> <span>己</span> <span>己</span></p>
            <p><span>ГБ</span> <span>ГБ</span> <span>ГБ</span></p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="s1">
    <div class="s1-sym s1-sym-1 fs-24">己</div>
    <div class="s1-sym s1-sym-2 fs-24">己</div>
    <div class="s1-sym s1-sym-3 fs-24">己</div>
    <div class="s1-sym s1-sym-4 fs-24">己</div>
    <div class="s1-sym s1-sym-5 fs-24">己</div>
    <div class="s1-sym s1-sym-6 fs-24 color-wood">己</div>
    <div class="s1-sym s1-sym-7 fs-24">己</div>
    <div class="s1-sym s1-sym-8 fs-24">己</div>
    <div class="s1-sym s1-sym-9 fs-24 color-metall">己</div>
    <div class="s1-sym s1-sym-10 fs-24">己</div>
    <div class="s1-sym s1-sym-11 fs-24 color-water">己</div>
    <img src="../images/dist/s1.png" alt="">
  </div>

  <div class="t2">
    <div class="t2__col">
      <div class="t2__head">
        <span>Гуа </span> <span>4</span>
      </div>
      <div class="t2__row">
        <span>Шэн Ци </span> <span>С</span>
      </div>
    </div>

    <div class="t2__col">
      <div class="t2__head">
        <span>Гуа </span> <span>4</span>
      </div>
      <div class="t2__row">
        <span>Шэн Ци </span> <span>С</span>
      </div>
    </div>

    <div class="t2__col">
      <div class="t2__head">
        <span>Личный Разрушитель</span>
      </div>
      <div class="t2__row">
        <span>Дня: </span> <span>丑</span> <span>Года:</span> <span>酉</span>
      </div>
    </div>

    <div class="t2__col">
      <div class="t2__head">
        <span>Путешествующая лошадь </span>
      </div>
      <div class="t2__row">
        <span>Дня:
        </span> <span>巳</span>

        <span>Года:</span>

        <span>巳</span>
      </div>
    </div>
  </div>

  <div class="table-title color-earth fs-24">Годы жизни</div>

  <div class="t3">
    <div class="t3__col">
      <div class="t3__row">
        2082 <span class="color-wood">壬</span><span class="color-water">寅</span>
      </div>
      <div class="t3__row">
        2082 <span class="color-wood">壬</span><span class="color-water">寅</span>
      </div>
      <div class="t3__row t3__row--disabled">
        2082 <span class="color-wood">壬</span><span class="color-water">寅</span>
      </div>
      <div class="t3__row t3__row--hover">
        2082 <span class="color-wood">壬</span><span class="color-water">寅</span>
      </div>
      <div class="t3__row">
        2082 <span class="color-wood">壬</span><span class="color-water">寅</span>
      </div>
      <div class="t3__row">
        2082 <span class="color-wood">壬</span><span class="color-water">寅</span>
      </div>
    </div>
    <div class="t3__col">
      <div class="t3__row">
        2082 <span class="color-wood">壬</span><span class="color-water">寅</span>
      </div>
      <div class="t3__row">
        2082 <span class="color-wood">壬</span><span class="color-water">寅</span>
      </div>
      <div class="t3__row">
        2082 <span class="color-wood">壬</span><span class="color-water">寅</span>
      </div>
      <div class="t3__row">
        2082 <span class="color-wood">壬</span><span class="color-water">寅</span>
      </div>
      <div class="t3__row">
        2082 <span class="color-wood">壬</span><span class="color-water">寅</span>
      </div>
      <div class="t3__row">
        2082 <span class="color-wood">壬</span><span class="color-water">寅</span>
      </div>
    </div>
    <div class="t3__col">
      <div class="t3__row">
        2082 <span class="color-wood">壬</span><span class="color-water">寅</span>
      </div>
      <div class="t3__row">
        2082 <span class="color-wood">壬</span><span class="color-water">寅</span>
      </div>
      <div class="t3__row">
        2082 <span class="color-wood">壬</span><span class="color-water">寅</span>
      </div>
      <div class="t3__row">
        2082 <span class="color-wood">壬</span><span class="color-water">寅</span>
      </div>
      <div class="t3__row">
        2082 <span class="color-wood">壬</span><span class="color-water">寅</span>
      </div>
      <div class="t3__row">
        2082 <span class="color-wood">壬</span><span class="color-water">寅</span>
      </div>
    </div>
    <div class="t3__col">
      <div class="t3__row">
        2082 <span class="color-wood">壬</span><span class="color-water">寅</span>
      </div>
      <div class="t3__row">
        2082 <span class="color-wood">壬</span><span class="color-water">寅</span>
      </div>
      <div class="t3__row">
        2082 <span class="color-wood">壬</span><span class="color-water">寅</span>
      </div>
      <div class="t3__row">
        2082 <span class="color-wood">壬</span><span class="color-water">寅</span>
      </div>
      <div class="t3__row">
        2082 <span class="color-wood">壬</span><span class="color-water">寅</span>
      </div>
      <div class="t3__row">
        2082 <span class="color-wood">壬</span><span class="color-water">寅</span>
      </div>
    </div>
    <div class="t3__col">
      <div class="t3__row">
        2082 <span class="color-wood">壬</span><span class="color-water">寅</span>
      </div>
      <div class="t3__row">
        2082 <span class="color-wood">壬</span><span class="color-water">寅</span>
      </div>
      <div class="t3__row">
        2082 <span class="color-wood">壬</span><span class="color-water">寅</span>
      </div>
      <div class="t3__row">
        2082 <span class="color-wood">壬</span><span class="color-water">寅</span>
      </div>
      <div class="t3__row">
        2082 <span class="color-wood">壬</span><span class="color-water">寅</span>
      </div>
      <div class="t3__row">
        2082 <span class="color-wood">壬</span><span class="color-water">寅</span>
      </div>
    </div>
    <div class="t3__col">
      <div class="t3__row">
        2082 <span class="color-wood">壬</span><span class="color-water">寅</span>
      </div>
      <div class="t3__row">
        2082 <span class="color-wood">壬</span><span class="color-water">寅</span>
      </div>
      <div class="t3__row">
        2082 <span class="color-wood">壬</span><span class="color-water">寅</span>
      </div>
      <div class="t3__row">
        2082 <span class="color-wood">壬</span><span class="color-water">寅</span>
      </div>
      <div class="t3__row">
        2082 <span class="color-wood">壬</span><span class="color-water">寅</span>
      </div>
      <div class="t3__row">
        2082 <span class="color-wood">壬</span><span class="color-water">寅</span>
      </div>
    </div>
  </div>
</div>

<!--#include virtual="./parts/nav.html" -->
</div>
<!--#include virtual="./parts/footer.html" -->
<script src="https://api-maps.yandex.ru/2.1/?apikey=21e9bb68-c626-48cd-9ec6-caba33922726&lang=ru_RU"
  type="text/javascript"></script>
<!-- 
<script>
  flatpickr("#rangePicker", {
    locale: "ru",
    dateFormat: "d.m"
  });
</script> -->

<script>
  const cities = [
    { name: "Алматы", timezone: "Asia/Almaty", lat: "43.238949", lon: "76.889709" },
    { name: "Москва", timezone: "Europe/Moscow", lat: "55.755825", lon: "37.617298" },
    { name: "Астана", timezone: "Asia/Almaty", lat: "51.169392", lon: "71.449074" },
    { name: "Лондон", timezone: "Europe/London", lat: "51.507351", lon: "-0.127758" },
  ];

  function getUTCOffsetString(timezone) {
    const date = new Date();
    const dateUtc = new Date(date.toLocaleString('en-US', { timeZone: 'UTC' }));
    const dateTz = new Date(date.toLocaleString('en-US', { timeZone: timezone }));
    const diffMin = (dateTz.getTime() - dateUtc.getTime()) / 60000;
    const sign = diffMin >= 0 ? '+' : '-';
    const hours = String(Math.floor(Math.abs(diffMin) / 60)).padStart(2, '0');
    const minutes = String(Math.abs(diffMin) % 60).padStart(2, '0');
    return `UTC${sign}${hours}:${minutes}`;
  }

  const allTimezones = [...new Set(cities.map(c => c.timezone))];
  const uniqueUTCs = Array.from(new Set(allTimezones.map(tz => getUTCOffsetString(tz))));

  const timezoneSelect = document.getElementById('timezone-select');
  function fillTimezoneSelect(selectedUTC = '') {
    timezoneSelect.innerHTML = '';
    uniqueUTCs.forEach(utc => {
      const opt = document.createElement('option');
      opt.value = utc;
      opt.textContent = utc;
      if (utc === selectedUTC) opt.selected = true;
      timezoneSelect.appendChild(opt);
    });
  }

  fillTimezoneSelect();

  const input = document.getElementById('city-search');
  const dropdown = document.getElementById('city-dropdown');
  const latInput = document.getElementById('city-lat');
  const lonInput = document.getElementById('city-lon');

  input.addEventListener('input', function () {
    const value = this.value.trim().toLowerCase();
    dropdown.innerHTML = '';

    if (!value) return;

    const filtered = cities.filter(city => city.name.toLowerCase().includes(value));
    if (!filtered.length) {
      dropdown.innerHTML = '<div class="dropdown-item">Город не найден</div>';
      return;
    }

    filtered.forEach(city => {
      const item = document.createElement('div');
      item.className = 'dropdown-item';
      item.textContent = `${city.name} (${city.timezone})`;
      item.onclick = () => selectCity(city);
      dropdown.appendChild(item);
    });
    dropdown.style.display = 'block';
  });

  function selectCity(city) {
    input.value = city.name;
    latInput.value = city.lat;
    lonInput.value = city.lon;
    const utcOffset = getUTCOffsetString(city.timezone);
    fillTimezoneSelect(utcOffset);
    dropdown.innerHTML = '';
    dropdown.style.display = 'none';
  }

  document.addEventListener('click', function (e) {
    if (!e.target.closest('.city-form')) {
      dropdown.style.display = 'none';
    }
  });
</script>